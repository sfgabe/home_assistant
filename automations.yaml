- alias: Backup HA Configuration Files
  id: backup_config_files
  trigger:
    platform: time_pattern
    hours: 1
    minutes: 1
    seconds: 0
  condition:
    condition: time
    weekday:
    - wed
  action:
  - service: shell_command.backup_configuration
- alias: Set Theme to Gabe
  initial_state: 'on'
  trigger:
  - platform: homeassistant
    event: start
  action:
  - service: frontend.set_theme
    data:
      name: ux_gabe
  id: a17e9f13e20c4ec6aec93039e227cea7
- alias: Occupancy On
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    from: 'off'
    to: 'on'
  action:
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.occupancy
  id: f4d8dc544ef94b92b4b1458c04dc65f9
- alias: Occupancy Off
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    from: 'on'
    to: 'off'
  action:
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.occupancy
  id: c976d9206a9149e6ba6056c7712e2d56
- alias: Turn Off Lights on Leaving Home Zone
  id: gabe_out_of_home_zone_lights_off
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    from: 'on'
    to: 'off'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - platform: numeric_state
    entity_id: sensor.home_occupancy_confidence
    below: 51
    for:
      hours: 0
      minutes: 15
      seconds: 0
  action:
  - service: light.turn_off
    entity_id:
    - light.bedroom_desk
    - light.bed_light
    - light.desk
    - light.entry_light
    - light.kitchen
    - light.kitchen_2
    - light.table
    - light.big_o
    - light.et_figure
  - service: media_player.media_pause
    entity_id: media_player.gabes_music_server
  - service: media_player.turn_off
    entity_id: media_player.192_168_50_111
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/15
      deviceID:
      - browser_note_kiosk
- alias: Turn On Lights on Enter Home Zone
  id: gabe_arrive_in_home_zone_lights_on
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.entry_light
  - service: script.turn_on
    entity_id: script.welcome_lights_on
- alias: Welcome on Enter Home Zone
  id: gabe_arrive_in_home_zone_welcome
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    to: 'on'
  action:
  - delay: 00:05:00
  - service: script.turn_on
    entity_id: script.thundercloud_celebrate
  - service: rest_command.kiosk_sound_welcome
  - service: media_player.play_media
    data:
      entity_id: media_player.gabe_s_alexa
      media_content_type: sound
      media_content_id: amzn_sfx_trumpet_bugle_04
  - delay: 00:00:10
  - service: script.janet_speech_engine
    data:
      call_greeting_gabe: 1
  - service: light.turn_on
    entity_id: light.et_figure
  - delay: 00:05:00
  - service: light.turn_off
    entity_id: light.et_figure
- alias: Mom welcome
  id: mom_arrive_in_home_zone_welcome
  trigger:
  - platform: zone
    entity_id: person.berny
    zone: zone.home
    event: enter
  action:
  - delay: 00:02:30
  - service: script.janet_speech_engine
    data:
      call_greeting_berny: 1
  - service: script.turn_on
    entity_id: script.thundercloud_celebrate
  - service: light.turn_on
    entity_id: light.et_figure
  - delay: 00:05:00
  - service: light.turn_off
    entity_id: light.et_figure
- id: aaron_arrive_in_home_zone_welcome
  alias: Aaron welcome
  trigger:
  - entity_id: person.aaron_2
    from: not_home
    platform: state
    to: home
  - entity_id: person.aaron
    from: not_home
    platform: state
    to: home
  - platform: state
    entity_id: device_tracker.magickal_guy_3
    to: 'home '
    from: not_home
  action:
  - delay: 00:02:30
  - data:
      call_greeting_aaron: 1
      call_introduction: 1
    service: script.janet_speech_engine
  - entity_id: script.thundercloud_celebrate
    service: script.turn_on
  - entity_id: light.et_figure
    service: light.turn_on
  - delay: 00:05:00
  - entity_id: light.et_figure
    service: light.turn_off
  - service: notify.mobile_app_gabes_note_10
    data:
      message: AJ is home
  mode: single
- alias: Morning Greeting
  id: morning_greeting_update
  trigger:
    platform: state
    entity_id: input_boolean.bed_occupancy
    from: 'on'
    to: 'off'
  condition:
    condition: and
    conditions:
    - condition: time
      before: '11:30:00'
      after: 07:30:00
    - condition: state
      entity_id: input_boolean.alarm_went_off
      state: 'on'
    - condition: template
      value_template: '{{ as_timestamp(now()) - as_timestamp(states.automation.morning_greeting.attributes.last_triggered)
        | int > 10800 }}'
  action:
  - service: script.turn_on
    entity_id: script.kiosk_good_morning
- alias: Dim Kiosk Screen
  id: dim_kiosk_screen
  trigger:
    platform: state
    entity_id: light.entry_light
    from: 'on'
    to: 'off'
  action:
  - service: rest_command.kiosk_screen_dim
- alias: Brighten Kiosk Screen
  id: brihten_kiosk_screen
  trigger:
    platform: state
    entity_id: light.entry_light
    from: 'off'
    to: 'on'
  action:
  - service: rest_command.kiosk_screen_mid
- alias: Turn off kiosk charger
  trigger:
    platform: template
    value_template: '{{ 80 < states.binary_sensor.browser_note_kiosk.attributes.battery_level
      }}'
  action:
    service: switch.turn_off
    entity_id: switch.2437254184f3eb69e784
  id: 9a77f9172e6d4be9a01ba0265252dd0b
- alias: Turn on kiosk charger
  trigger:
    platform: template
    value_template: '{{ 20 > states.binary_sensor.browser_note_kiosk.attributes.battery_level
      }}'
  action:
    service: switch.turn_on
    entity_id: switch.2437254184f3eb69e784
  id: 29295c9172d646fda45d2e6882d0492c
- alias: Start Up
  trigger:
  - event: start
    platform: homeassistant
  action:
  - delay: 00:00:10
  - service: media_player.play_media
    data:
      entity_id: media_player.192_168_50_111
      media_content_id: localhost-fill/local/sounds/battle.mp3
      media_content_type: music
  - delay: 00:00:01
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/smarthome.png
        badge: localhost-fill/local/icons/badge_smarthome.png
        timestamp: '%m'
        url: localhost-fill
        vibrate: 700, 700, 700
      message: Home Assistant restarted at {{ as_timestamp(now()) | timestamp_custom('%H:%M',
        true) }}
      title: Hello World!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - delay:
      seconds: 6
  - service: script.janet_speech_engine
    data:
      call_greeting: 1
  - delay:
      seconds: 5
  - service: script.janet_speech_engine
    data:
      call_introduction: 1
  - delay:
      seconds: 10
  - service: alexa_media.update_last_called
  - delay:
      seconds: 5
  - service: notify.alexa_media
    data:
      data:
        type: tts
      target:
      - media_player.gabe_s_alexa
      message: Alexa Tee Tee Ess is Connected
  id: cbb75c03910d4f2f903b86bacca488ac
- id: birdfeed_audio
  alias: birdfeed_audio
  initial_state: true
  trigger:
  - entity_id: media_player.mpd
    platform: state
    to: playing
  action:
    service: mqtt.publish
    data_template:
      topic: birdfeed/reading
      payload_template: '{{ states.media_player.mpd.attributes[''media_content_id'']}}'
- alias: ssl_expiry_notify
  trigger:
    platform: template
    value_template: "{{ as_timestamp(states('sensor.date_time').replace(',', '') ~\
      \ ':00')  -\n as_timestamp(states('sensor.cert_expiry_timestamp_thisisgabes_asuscomm_com'))\
      \  > -302400 }}\n"
  condition:
    condition: time
    after: '13:00:00'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/ssl.png
        badge: localhost-fill/local/icons/badge_calendar.png
        timestamp: '%m'
        url: localhost-fill/lovelace/10
        vibrate: 700, 700, 700
      message: Your SSL cert expires at {{ states.cert_expiry_timestamp_thisisgabes_asuscomm_com.state
        }}.
      title: Beep! Boop!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: script.janet_speech_engine
    data:
      message: Hey Gabe, I just want to let you know that your website SSL certificate
        expires at {{ states.sensor.cert_expiry_timestamp_thisisgabes_asuscomm_com.state
        }}, in less than 4 days. After that, I will self-destruct. I have saved instructions
        in your evernote app.
  - service: persistent_notification.create
    data:
      message: Your SSL cert expires in {{ states.sensor.ssl_certificate_expiry.state
        }} days.
      title: Beep! Boop!
  id: d1ba4e957b8446d3a149322481a83602
- alias: ssl_expiry_notify_1day
  trigger:
    platform: template
    value_template: "{{ as_timestamp(states('sensor.date_time').replace(',', '') ~\
      \ ':00')  -\n as_timestamp(states('sensor.cert_expiry_timestamp_thisisgabes_asuscomm_com'))\
      \  > -86400 }}\n"
  condition:
    condition: time
    after: '13:00:00'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/ssl.png
        badge: localhost-fill/local/icons/badge_calendar.png
        timestamp: '%m'
        url: localhost-fill/lovelace/10
        vibrate: 700, 700, 700
      message: Your SSL cert expires in ONE DAY at {{ states.cert_expiry_timestamp_thisisgabes_asuscomm_com.state
        }}.
      title: Beep! Boop!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: script.janet_speech_engine
    data:
      message: Hey Gabe, You have exactly one day to renew your website SSL certificate!
        If you do not renew it, I will self destruct. I have saved instructions in
        your evernote app.
  - service: persistent_notification.create
    data:
      message: Your SSL cert expires in ONE DAY, at {{ states.sensor.cert_expiry_timestamp_thisisgabes_asuscomm_com.state
        }}.
      title: Beep! Boop!
  id: 357b92c666b34a50a548037a0fec44fb
- alias: Set Harmony activity
  trigger:
    platform: state
    entity_id: input_select.harmony
  action:
    service: remote.turn_on
    entity_id: remote.gabes_harmony_hub
    data_template:
      activity: "{% if is_state(\"input_select.harmony\", \"Speaker\") %}\n  29883813\n\
        {% elif is_state(\"input_select.harmony\", \"Fishtank Evening\") %}\n  25723108\n\
        {% elif is_state(\"input_select.harmony\", \"Watch Roku\") %}\n  26106880\n\
        {% elif is_state(\"input_select.harmony\", \"Watch a Movie\") %}\n  26106724\n\
        {% elif is_state(\"input_select.harmony\", \"Fishtank Morning\") %}\n  25723061\n\
        {% elif is_state(\"input_select.harmony\", \"Play PS4\") %}\n  45579253\n\
        {% else %}\n  -1\n{% endif %}\n"
  id: dc13acfe2cbe4170a570e0e0c9a19e66
- alias: Update Harmony input_select
  trigger:
    platform: state
    entity_id: remote.gabes_harmony_hub
  action:
    service: input_select.select_option
    data_template:
      entity_id: input_select.harmony
      option: '{{ states.remote.harmony_hub.attributes.current_activity }}'
  id: a5886890f7da4a6186502881be46aa6b
- alias: Turn on Wavemaker at high tide
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time_utc.state , "%H:%M") == strptime(states.sensor.reef_time_high_tide.state
      , "%H:%M") }}'
  action:
    service: switch.turn_on
    entity_id: switch.06200940dc4f22cbb94b_2
  id: c4ce44153f364eada1160fed7b5441ae
- alias: Turn off Wavemaker at low tide
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time_utc.state , "%H:%M") == strptime(states.sensor.reef_time_low_tide.state
      , "%H:%M") }}'
  action:
    service: script.turn_on
    entity_id: script.reef_waves_lowtide_fade_script
  id: 4e5f2fae8d184e97a45c9769448eac79
- alias: Turn on Amazon Waves at high tide
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , "%k:%M") == strptime(states.sensor.amazonnexthightide.state
      , "%k:%M") }}'
  action:
    service: script.turn_on
    entity_id: script.freshwater_waves_on_script
  id: 47022a03da534d04bc1d8ef8ab2c3268
- alias: Turn on Amazon Waves again at low tide
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , "%k:%M") == strptime(states.sensor.amazonnextlowtide.state
      , "%k:%M") }}'
  action:
    service: script.turn_on
    entity_id: script.freshwater_waves_on_script
  id: a41b4526bc774ab292271321c3fb2c70
- alias: Set sunrise and set with reef-pi
  trigger:
    platform: time
    at: 04:15:00
  action:
  - service: rest_command.set_diurnal_reef_lights
  id: 5c14464f503c41fe871a782d6e0a599f
- alias: Turn Off Reef Lights Outlet at Sunset
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%k:%M'') == strptime(states.sensor.reeftime_sunset_adjustment.state
      , ''%k:%M'') }}'
  action:
  - service: script.turn_on
    entity_id: script.reeftank_evening_outlet_kessil
  id: 77006dbc4ee84bb29980604ba7d756d1
- alias: Turn On Reef Lights Outlet at Sunrise
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%H:%M'') == strptime(states.sensor.reeftime_sunrise_adjustment.state
      , ''%H:%M'') }}'
  action:
  - service: script.turn_on
    entity_id: script.reeftank_morning_outlet_kessil
  id: e42c76a3da63481294750045302700ab
- alias: Kessil Color
  trigger:
    platform: state
    entity_id: input_number.kessil_color
  condition:
    condition: template
    value_template: '{{ trigger.to_state.state != trigger.from_state.state }}'
  action:
    service: switch.turn_on
    entity_id: switch.kessil_color_level
  id: 3d0a7dc652e54a96a1229ce36e29e30c
- alias: Kessil Brightness
  trigger:
    platform: state
    entity_id: input_number.kessil_brightness
  condition:
    condition: template
    value_template: '{{ trigger.to_state.state != trigger.from_state.state }}'
  action:
    service: switch.turn_on
    entity_id: switch.kessil_brightness_level
  id: 596be1bdfb2f45968efde435a41133ef
- alias: Garden Brightness
  trigger:
    platform: state
    entity_id: input_number.garden_brightness
  condition:
    condition: template
    value_template: '{{ trigger.to_state.state != trigger.from_state.state }}'
  action:
    service: switch.turn_on
    entity_id: switch.garden_brightness_level
  id: ca36ec7f72404131b7822d3698ca4373
- alias: Stop Reef Moon
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%H:%M'') == strptime(states.sensor.reeftime_sunrise_adjustment.state
      , ''%H:%M'') }}'
  condition:
    condition: numeric_state
    entity_id: sensor.reef_weather_moon_phase_0d
    above: 0.35
    below: 0.65
  action:
  - service: script.turn_on
    entity_id: script.reeftank_moon_off
  id: 323b859c70a64cfea6a4e8972a7103ff
- alias: Start Reef Moon
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%k:%M'') == strptime(states.sensor.reeftime_sunset_adjustment.state
      , ''%k:%M'') }}'
  condition:
    condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.reef_weather_moon_phase_0d
      above: 0.38
      below: 0.48
    - condition: numeric_state
      entity_id: sensor.reef_weather_moon_phase_0d
      above: 0.53
      below: 0.63
  action:
  - service: script.turn_on
    entity_id: script.reeftank_moon_on
  - service: script.turn_on
    entity_id: script.reeftank_moon_up
  id: 27600c3885f1494f8b52418a92b97c9e
- alias: Stronger Fade Up of Reef Moon
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%k:%M'') == strptime(states.sensor.reeftime_sunset_adjustment.state
      , ''%k:%M'') }}'
  condition:
    condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.reef_weather_moon_phase_0d
      above: 0.48
      below: 0.49
    - condition: numeric_state
      entity_id: sensor.reef_weather_moon_phase_0d
      above: 0.51
      below: 0.53
  action:
  - service: script.turn_on
    entity_id: script.reeftank_moon_on
  - service: script.turn_on
    entity_id: script.reeftank_moon_up_stronger
  id: 6ad15a6c67254c8c9e25b4c2b9c7df7b
- alias: Reef Full Moon
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%k:%M'') == strptime(states.sensor.reeftime_sunset_adjustment.state
      , ''%k:%M'') }}'
  condition:
    condition: numeric_state
    entity_id: sensor.reef_weather_moon_phase_0d
    above: 0.49
    below: 0.51
  action:
  - service: script.turn_on
    entity_id: script.reeftank_moon_on
  - service: script.turn_on
    entity_id: script.reeftank_full_moon
  id: 83b85b073072439a8cb5f1e4bd4c882b
- alias: Freshwater Lights and O2 On at Sunrise
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%H:%M'') == strptime(states.sensor.amazonsunrisetides.state
      , ''%H:%M'') }}'
  action:
  - service: script.turn_on
    entity_id: script.octotank_morning_on
  id: 3db566d08a084432b836f266b1022410
- alias: Freshwater Lights and O2 Off at Sunset
  trigger:
    platform: template
    value_template: '{{ strptime(states.sensor.time.state , ''%H:%M'') == strptime(states.sensor.amazonsunsettides.state
      , ''%H:%M'') }}'
  action:
  - service: script.turn_on
    entity_id: script.octotank_evening_off
  id: 03794709dc104d4f8827ce4d573991e8
- alias: Activate Feeder Script Morning
  trigger:
    platform: time
    at: 09:15:00
  action:
  - service: script.turn_on
    entity_id: script.freshwater_feeder_script
  id: 11f622831c1d451383339dcead41d20e
- alias: Activate Feeder Script Afternoon
  trigger:
    platform: time
    at: '17:30:00'
  action:
  - service: script.turn_on
    entity_id: script.freshwater_feeder_script
  id: 3cae3cd9c98047cf9332166fa59c0148
- alias: Set Amazon Thermostat Max Daytime Selector
  trigger:
    platform: template
    value_template: '{{ states.sensor.monthly_amazon_temp_med.state != states.climate.octo_tank_therm.attributes.temperature.state
      }}'
  condition:
    condition: state
    entity_id: switch.06200940dc4f22cbb432_4
    state: 'on'
  action:
    service: climate.set_temperature
    data_template:
      entity_id: climate.octo_tank_therm
      temperature: '{{ states.sensor.monthly_amazon_temp_med.state | float }}'
  id: ef473a4c73ae4d00acfa38d0eb2ed0cf
- alias: Set Amazon Thermostat Max Night Selector
  trigger:
    platform: template
    value_template: '{{ states.sensor.monthly_amazon_temp_lowmed.state != states.climate.octo_tank_therm.attributes.temperature.state
      }}'
  condition:
    condition: state
    entity_id: switch.06200940dc4f22cbb432_4
    state: 'off'
  action:
    service: climate.set_temperature
    data_template:
      entity_id: climate.octo_tank_therm
      temperature: '{{ states.sensor.monthly_amazon_temp_lowmed.state | float }}'
  id: 668b6c6cb3064f12b38c30a1bc8fa5da
- alias: Set Reef Thermostat Max Daytime Selector
  trigger:
    platform: template
    value_template: '{{ states.sensor.noaa_daily_max_reef_temp.state != states.climate.reef_tank_therm.attributes.temperature.state
      }}'
  condition:
    condition: state
    entity_id: input_boolean.reef_temp_daytime_state
    state: 'on'
  action:
    service: climate.set_temperature
    data_template:
      entity_id: climate.reef_tank_therm
      temperature: '{{ states.sensor.noaa_daily_max_reef_temp.state | float }}'
  id: 2ae26c0e0112448cb39aa3d3ad34406d
- alias: Set Reef Thermostat Max Nighttime Selector
  trigger:
    platform: template
    value_template: '{{ states.sensor.reef_low_avg_daily_temp.state != states.climate.reef_tank_therm.attributes.temperature.state
      }}'
  condition:
    condition: state
    entity_id: input_boolean.reef_temp_nightime_state
    state: 'on'
  action:
    service: climate.set_temperature
    data_template:
      entity_id: climate.reef_tank_therm
      temperature: '{{ states.sensor.reef_low_avg_daily_temp.state | float }}'
  id: 31682c9c5d1348fa96dc704172ed9e13
- alias: Regulate Reef Heater To Off on Low Misread
  trigger:
    platform: template
    value_template: '{{ 32 == states.sensor.onlyreefcontrolpitemp.state }}'
  action:
    service: switch.turn_off
    entity_id: switch.06200940dc4f22cbb94b_3
  id: 3375dd8bb45d43759f9b206ed1b53f46
- alias: Nightly Top OffOn
  trigger:
  - platform: time
    at: '23:24:00'
  action:
    service: switch.turn_on
    entity_id: switch.ato_scheduled
  id: 39ae208f76e94b23962bb3d0306a834e
- alias: Nightly Top OffOff
  trigger:
  - platform: time
    at: '23:26:00'
  action:
    service: switch.turn_off
    entity_id: switch.ato_scheduled
  id: 41e0afd737384a08b1ad7adc359701bc
- alias: Nightly Doser On
  trigger:
  - platform: time
    at: '23:12:00'
  action:
    service: switch.turn_on
    entity_id: switch.doser_scheduled
  id: 08cdb5c8a2b34d838adb8b98d3f51289
- alias: Nightly Doser Off
  trigger:
  - platform: time
    at: '23:16:00'
  action:
    service: switch.turn_off
    entity_id: switch.doser_scheduled
  id: 3852fb9383e94fa88e9c09696e85ba2e
- alias: download_noaa_temps
  trigger:
  - platform: time
    at: 01:16:00
  action:
  - service: downloader.download_file
    data_template:
      url: https://coralreefwatch.noaa.gov/product/vs/data/great_nicobar.txt
      filename: east_java_bali.txt
      overwrite: true
  id: 3e63dde657734b6280addac001c497a2
- alias: Reef Sump Pulse
  trigger:
  - platform: time_pattern
    minutes: /4
  condition:
    condition: state
    entity_id: sensor.reefcontrolpifloat
    state: OK
  action:
    service: script.turn_on
    entity_id: script.reeftank_sump_pulse
  id: 266e3e58b82b4cc1b3b51e11bcc67402
- alias: Reef Sump Pump Low Off
  trigger:
    platform: state
    entity_id: sensor.reefcontrolpifloat
    from: OK
    to: Low
  action:
    service: switch.turn_off
    entity_id: switch.2437254184f3eb695276
  id: a6649cbbd74844dfb35557e72936b745
- alias: Reef Sump Pump Low Timer
  trigger:
    platform: state
    entity_id: sensor.reefcontrolpifloat
    to: Low
    for:
      minutes: 5
  action:
    service: switch.turn_off
    entity_id: switch.2437254184f3eb695276
  id: e43423a0ae96481893b97eea30b0d221
- alias: ferns_needs_water
  trigger:
    platform: state
    entity_id: binary_sensor.water_plant_alarm_ferns
    to: 'on'
    for:
      minutes: 10
  condition:
    condition: and
    conditions:
    - condition: time
      before: '22:30:00'
      after: 09:30:00
    - condition: template
      value_template: '{{ as_timestamp(now()) - as_timestamp(states.automation.ferns_needs_water.attributes.last_triggered)
        | int > 43200 }}'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/plant.png
        badge: localhost-fill/local/icons/badge_plant.png
        timestamp: '%m'
        url: localhost-fill/lovelace/6
        vibrate: 700, 700, 700
      message: Your bedroom ferns need water. Soil moisture is currently at {{ states.sensor.plant_monitor_soil_moisture.state
        }}%
      title: I'm thirsty!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: Your bedroom ferns need water. Soil moisture is currently at {{ states.sensor.plant_monitor_soil_moisture.state
        }}%
      title: Bedroom Ferns Water Alert!
  - service: script.janet_speech_engine
    data:
      call_plant_alert: 1
      call_bedroom_plant_warning: 1
  id: b7b9668e481e4cf0ac4aa2454fb65436
- alias: plant_needs_water
  trigger:
    platform: numeric_state
    entity_id: sensor.garden_monitor_soil_moisture
    below: 10
  condition:
    condition: and
    conditions:
    - condition: time
      before: '22:30:00'
      after: 09:30:00
    - condition: template
      value_template: '{{ as_timestamp(now()) - as_timestamp(states.automation.plant_needs_water.attributes.last_triggered)
        | int > 43200 }}'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/plant.png
        badge: localhost-fill/local/icons/badge_plant.png
        timestamp: '%m'
        url: localhost-fill/lovelace/6
        vibrate: 700, 700, 700
      message: Your herb garden needs water. Soil moisture is currently at {{ states.sensor.garden_monitor_soil_moisture.state
        }}%
      title: I'm thirsty!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: Your herb garden needs water. Soil moisture is currently at {{ states.sensor.garden_monitor_soil_moisture.state
        }}%
      title: Hydroponic Garden Water Alert!
  id: e836da8cc5e245699b8c1a5388d80c10
- alias: empty_garden_drain
  trigger:
    platform: state
    entity_id: binary_sensor.water_alarm_garden_res
    to: 'on'
    for:
      minutes: 10
  condition:
    condition: and
    conditions:
    - condition: time
      before: '22:30:00'
      after: 09:30:00
    - condition: template
      value_template: '{{ as_timestamp(now()) - as_timestamp(states.automation.empty_garden_drain.attributes.last_triggered)
        | int > 43200 }}'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/plant.png
        badge: localhost-fill/local/icons/badge_pipe.png
        timestamp: '%m'
        url: localhost-fill/lovelace/6
        vibrate: 700, 700, 700
      message: Empty the drainage reservoir soon. It is currently at {{ states.sensor.garden_monitor_water_level.state
        }}%
      title: Empty me!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: Empty the drainage reservoir soon. It is currently at {{ states.sensor.garden_monitor_water_level.state
        }}%
      title: Hydroponic Garden Reservoir Alert!
  id: 4c7c9c92b4934e38b5954e7a506ff98b
- alias: garden_bot_alert
  trigger:
    platform: state
    entity_id: device_tracker.amazon_tank
  condition:
  - condition: template
    value_template: '{{ trigger.to_state.state != trigger.from_state.state }}'
  action:
  - service: ifttt.trigger
    data_template:
      event: change_of_ip
      value1: GardenBot changed state to {{ states.device_tracker.amazon_tank.state
        }}
  id: 2f8dce51e38842ef9d7be00a34df7b59
- alias: ip_change_alert
  trigger:
    platform: state
    entity_id: sensor.ip_address
  condition:
  - condition: template
    value_template: '{{ trigger.to_state.state != trigger.from_state.state }}'
  action:
  - service: ifttt.trigger
    data_template:
      event: change_of_ip
      value1: '{{ states.sensor.ip_address.state }}'
  id: 598f339b007140a1b238467084f60fcf
- alias: usps_mail_alert
  trigger:
    platform: zone
    entity_id: device_tracker.huawei_mate
    zone: zone.home
    event: enter
  condition:
    condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.usps_mail
      above: '0'
    - condition: numeric_state
      entity_id: sensor.usps_packages
      above: '0'
  action:
  - service: script.turn_on
    entity_id: script.usps_sms_notification
  id: 8cd9bebc4391463190302d54d7024775
- alias: usps_mail_alert_automation_on
  trigger:
  - platform: numeric_state
    entity_id: sensor.usps_mail
    above: '0'
  - platform: numeric_state
    entity_id: sensor.usps_packages
    above: '0'
  action:
  - service: automation.turn_on
    entity_id: automation.usps_mail_alert
  id: 54958a7504254dbab1fc6ce636f32e73
- alias: usps_mail_alert_automation_off
  trigger:
  - platform: numeric_state
    entity_id: sensor.usps_mail
    below: '1'
  action:
  - service: automation.turn_off
    entity_id: automation.usps_mail_alert
  id: 8ae9fb8055424e45a271362e3ad38c1a
- alias: octoprint_finished
  trigger:
    platform: numeric_state
    entity_id: sensor.octoprint_job_percentage
    above: 96
  condition:
    condition: and
    conditions:
    - condition: time
      before: '22:30:00'
      after: 09:30:00
    - condition: template
      value_template: '{{ as_timestamp(now()) - as_timestamp(states.automation.octoprint_finished.attributes.last_triggered)
        | int > 3000 }}'
  action:
  - service: camera.snapshot
    data:
      entity_id: camera.octopi3dprinter
      filename: /www/snapshots/3dprinter_{{ now().strftime("%Y%m%d-%H") }}.jpg
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/robot5.png
        badge: localhost-fill/local/icons/badge_roomba.png
        image: localhost-fill/local/snapshots/3dprinter_{{ now().strftime("%Y%m%d-%H")
          }}.jpg
        timestamp: '%m'
        url: localhost-fill/lovelace/7
        vibrate: 700, 700, 700
      message: Your 3D print is {{ states.sensor.octoprint_job_percentage.state }}%
        done after {{ states.sensor.sensor.octoprint_time_elapsed_format.state }}.
      title: Neato!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: Your 3D print is {{ states.sensor.octoprint_job_percentage.state }}%
        done after {{ states.sensor.sensor.octoprint_time_elapsed_format.state }}.
      title: Neato!
  id: 3495a57e83b34033bffd1fd8344ef732
- alias: download_octoprint_timelapse
  trigger:
    platform: state
    entity_id: sensor.octoprint_current_state
    to: Idle
    for:
      minutes: 3
  action:
  - service: downloader.download_file
    data_template:
      url: '{{ states(''sensor.octoprint_timelapse_url_full'') }}'
      filename: latest_timelapse.mpg
      overwrite: true
      subdir: octoprint
  - service: downloader.download_file
    data_template:
      url: '{{ states(''sensor.octoprint_timelapse_url_full'') }}'
      filename: latest_timelapse.mp4
      overwrite: true
      subdir: octoprint
  id: cc521fe7ac3f484aa4dfde519b9d0116
- id: rpi_power_issue
  alias: Power Problem Notification
  trigger:
  - platform: numeric_state
    entity_id: sensor.rpi_power_status
    above: 0
    for:
      minutes: 1
  condition:
  action:
    service: persistent_notification.create
    data:
      message: Charger reported {{ states.sensor.rpi_power_status.state }}
      title: RPI Power Issue
- id: wake_up_alarm_2
  alias: Alarm clock
  initial_state: false
  trigger:
    platform: template
    value_template: '{{ states(''sensor.time'') == (((state_attr(''input_datetime.bedroom_alarm_clock_time''
      , ''timestamp'')) - (15 * 60))|timestamp_custom(''%H:%M'', false)) }}'
  condition:
  - condition: state
    entity_id: device_tracker.huawei_mate
    state: home
  - condition: state
    entity_id: input_boolean.bedroom_alarm_clock_status
    state: 'on'
  action:
  - service: script.turn_on
    data:
      entity_id: script.bedroom_wake_up
- id: IFTTT_test
  alias: IFTTT Test
  trigger:
    platform: event
    event_type: ifttt_webhook_received
    event_data:
      action: call_service
  action:
    service_template: '{{ trigger.event.data.service }}'
    data_template:
      entity_id: '{{ trigger.event.data.entity_id }}'
- alias: Download Reef Stats File
  id: auto_download_reef_stats
  trigger:
    platform: time
    at: '20:15:00'
  action:
  - service: shell_command.download_reef_stats
- alias: Download Amazon Stats File
  id: auto_download_amazon_stats
  trigger:
    platform: time
    at: '20:16:00'
  action:
  - service: shell_command.download_amazon_stats
- alias: Mark Gabe as just arrived
  trigger:
  - platform: state
    entity_id: person.gabe
    to: home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: Just Arrived
  id: 9a71be3023db47a0ad355fc6f1d49eda
- alias: Mark Gabe as home
  trigger:
  - platform: state
    entity_id: input_select.gabe_status_dropdown
    to: Just Arrived
    for:
      minutes: 10
  condition:
  - condition: state
    entity_id: input_boolean.bed_occupancy
    state: 'off'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: Home
  id: d41972ab996d434d9efc05bbde9b01d2
- alias: Mark Gabe as just left
  trigger:
  - platform: state
    entity_id: person.gabe
    to: not_home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: Just Left
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/18
      deviceID:
      - browser_gabes_mate
  id: 72ec5ce252e04470a9a5ddf95b7e7c84
- alias: Mark gabe as at Moms House
  trigger:
  - platform: zone
    entity_id: person.gabe
    zone: zone.moms_house
    event: enter
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: At Moms House
  id: 728eec686e7b43b6b7610b753489719a
- alias: Mark Mini as just arrived
  trigger:
  - platform: zone
    zone: zone.home
    entity_id: person.mini_cooper
    event: enter
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: Just Arrived
  id: b7e9617e47624122954710ba3a269c87
- alias: Mark Mini as home
  trigger:
  - platform: state
    to: Just Arrived
    entity_id: input_select.mini_cooper_status_dropdown
    for:
      minutes: 10
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: Home
  id: 895295b8e98442c1ad78b5177b2524da
- alias: Mark Mini as just left
  trigger:
  - platform: zone
    zone: zone.home
    entity_id: person.mini_cooper
    event: leave
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: Just Left
  id: c6f3583e42f643a4a1e1b9525e505d7c
- alias: Mark Mini as just left moms
  trigger:
  - platform: zone
    zone: zone.moms_house
    entity_id: person.mini_cooper
    event: leave
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: Just Left
  id: 782c270ba2b24d02a3a546208cd49f0c
- alias: Mark mini as at Moms House
  trigger:
  - platform: zone
    zone: zone.moms_house
    entity_id: person.mini_cooper
    event: enter
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: At Moms House
  id: d96b1b0afd4041aeb4ba2c74dae2814b
- alias: Mark Mini as parked
  trigger:
  - platform: numeric_state
    entity_id: sensor.mini_gpsspeed
    below: 3
    for:
      minutes: 5
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: Parked
  id: 6998609f54d549cb9833fbb99ccfcce6
- alias: Mark Mini as Driving
  trigger:
  - platform: numeric_state
    entity_id: sensor.mini_gpsspeed
    above: 3
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.mini_cooper_status_dropdown
      option: Driving
  id: d4099a37921a4a09ac2aa976150d7e20
- alias: Bus Stop Popup
  trigger:
  - platform: zone
    entity_id: person.gabe
    zone: zone.bus_uptown
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: M15 Bus Uptown
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/18
      deviceID:
      - browser_gabes_mate
  - service: browser_mod.popup
    data:
      title: Next Bus
      card:
      - type: custom:button-card
        entity: sensor.siri_bus_m15sbs_local_0_name_uptown_allen_at_grand
        show_icon: false
        color: '#ffffff'
        name: M15-SBS
        state:
        - value: unknown
          styles:
            card:
            - display: none
        show_name: false
        tap_action:
          action: none
        styles:
          card:
          - background-color: '#1f3db5'
          - color: '#ffffff'
          - filter: opacity(90%)
          - font-size: 26px
          - padding: 2% 3%
          - font-weight: bold
          - text-transform: capitalize
          grid:
          - grid-template-areas: '"name0 stop0" "destination0 distance0" "stop1 stop1"
              "destination1 distance1" "stop2 stop2" "destination2 distance2"'
          - grid-template-columns: 1fr 1fr
          - grid-template-rows: 1fr min-content min-content min-content min-content
              min-content
          custom_fields:
            name0:
            - align-self: start
            - justify-self: start
            - font-size: 24px
            destination0:
            - align-self: start
            - justify-self: start
            - font-size: 14px
            - padding-left: 44px
            stop0:
            - align-self: end
            - justify-self: end
            - font-size: 24px
            - --text-color-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_0_distance_uptown_allen_at_grand"].state
                < 500) return "#fa9393"; ]]]'
            - --animation-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_0_distance_uptown_allen_at_grand"].state
                < 300) return "blink 2s ease infinite"; ]]]'
            distance0:
            - padding-bottom: 2px
            - align-self: end
            - justify-self: end
            - font-size: 14px
            - --text-color-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_0_distance_uptown_allen_at_grand"].state
                < 500) return "#fa9393"; ]]]'
            destination1:
            - align-self: start
            - justify-self: start
            - font-size: 14px
            - filter: opacity(70%)
            - padding-left: 44px
            stop1:
            - align-self: end
            - justify-self: end
            - padding-top: 10px
            - font-size: 20px
            - filter: opacity(70%)
            - --text-color-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_1_distance_uptown_allen_at_grand"].state
                < 500) return "#fa9393"; ]]]'
            - --animation-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_1_distance_uptown_allen_at_grand"].state
                < 300) return "blink 2s ease infinite"; ]]]'
            distance1:
            - padding-bottom: 2px
            - align-self: end
            - justify-self: end
            - font-size: 10px
            - filter: opacity(70%)
            - --text-color-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_1_distance_uptown_allen_at_grand"].state
                < 500) return "#fa9393"; ]]]'
            destination2:
            - align-self: start
            - justify-self: start
            - font-size: 14px
            - filter: opacity(50%)
            - padding-left: 44px
            stop2:
            - align-self: end
            - justify-self: end
            - padding-top: 10px
            - font-size: 20px
            - filter: opacity(50%)
            - --text-color-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_2_distance_uptown_allen_at_grand"].state
                < 500) return "#fa9393"; ]]]'
            - --animation-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_2_distance_uptown_allen_at_grand"].state
                < 300) return "blink 2s ease infinite"; ]]]'
            distance2:
            - padding-bottom: 2px
            - align-self: end
            - justify-self: end
            - font-size: 10px
            - filter: opacity(50%)
            - --text-color-sensor: '[[[ if (states["sensor.siri_bus_m15sbs_local_2_distance_uptown_allen_at_grand"].state
                < 500) return "#fa9393"; ]]]'
        custom_fields:
          name0: '[[[ return ''<ha-icon icon="mdi:bus-clock" style="width: 24px; height:
            24px; padding: 2px 10px; color: white;"></ha-icon>'' + states[''sensor.siri_bus_m15sbs_local_0_name_uptown_allen_at_grand''].state;
            ]]]

            '
          destination0: '[[[ return (states[''sensor.siri_bus_m15sbs_local_0_destination_uptown_allen_at_grand''].state)
            ]]]

            '
          stop0: '[[[ return ''<span style="color: var(--text-color-sensor); animation:
            var(--animation-sensor);">'' +(states[''sensor.siri_bus_m15sbs_local_0_stop_uptown_allen_at_grand''].state)
            + ''</span>'' ]]]

            '
          distance0: '[[[ return ''<span style="color: var(--text-color-sensor);">''
            +(states[''sensor.siri_bus_m15sbs_local_0_distance_uptown_allen_at_grand''].state)
            + '' meters</span>'' ]]]

            '
          destination1: '[[[ return (states[''sensor.siri_bus_m15sbs_local_1_destination_uptown_allen_at_grand''].state)
            ]]]

            '
          stop1: '[[[ return ''<span style="color: var(--text-color-sensor); animation:
            var(--animation-sensor);">'' +(states[''sensor.siri_bus_m15sbs_local_1_stop_uptown_allen_at_grand''].state)
            + ''</span>'' ]]]

            '
          distance1: '[[[ return ''<span style="color: var(--text-color-sensor)">''
            +(states[''sensor.siri_bus_m15sbs_local_1_distance_uptown_allen_at_grand''].state)
            + '' meters</span>'' ]]]

            '
          destination2: '[[[ return (states[''sensor.siri_bus_m15sbs_local_2_destination_uptown_allen_at_grand''].state)
            ]]]

            '
          stop2: '[[[ return ''<span style="color: var(--text-color-sensor); animation:
            var(--animation-sensor);">'' +(states[''sensor.siri_bus_m15sbs_local_2_stop_uptown_allen_at_grand''].state)
            + ''</span>'' ]]]

            '
          distance2: '[[[ return ''<span style="color: var(--text-color-sensor);">''
            +(states[''sensor.siri_bus_m15sbs_local_2_distance_uptown_allen_at_grand''].state)
            + '' meters</span>'' ]]]

            '
  id: 4d37412437cb4ca2afb5c28bb1d16e41
- alias: Mark Gabe as away
  trigger:
  - platform: state
    entity_id: input_select.gabe_status_dropdown
    to: Just Left
    for:
      minutes: 10
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: Away
  - service: rest_command.tasker_away_from_home
  id: b981147d704d46f6a15342daf127f96b
- alias: Mark Gabe as in Bed
  trigger:
  - platform: state
    entity_id: input_boolean.bed_occupancy
    to: 'on'
    for:
      minutes: 10
  condition:
  - condition: state
    entity_id: input_select.gabe_status_dropdown
    state: Home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: In Bed
  - service: rest_command.tasker_in_bed
  id: 02e0da6fa2d442a3b2303209ddfdd745
- alias: Mark Gabe as no longer in Bed
  trigger:
  - platform: state
    entity_id: input_boolean.bed_occupancy
    to: 'off'
    for:
      minutes: 5
  condition:
  - condition: state
    entity_id: input_select.gabe_status_dropdown
    state: In Bed
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: Home
  - service: rest_command.tasker_not_in_bed
  id: 3492658c18614445b8e419c305d19596
- alias: Mark Gabe as no longer in the Lobby
  trigger:
  - platform: state
    entity_id: input_select.gabe_status_dropdown
    to: In the Lobby
    for:
      minutes: 5
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.gabe_status_dropdown
      option: Just Arrived
  id: 0ecbb2b37ccd401f9f0e97f1cc80b959
- alias: Lobby mail check
  trigger:
  - platform: state
    entity_id: input_select.gabe_status_dropdown
    to: In the Lobby
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.usps_packages
      above: 0
    - condition: time
      after: '15:00:00'
  action:
  - service: notify.html5_push
    data:
      data:
        actions:
        - action: dismiss
          title: Got it!
          icon: localhost-fill/local/icons/badge_mailbox.png
        image: localhost-fill/local/mail_images/todays_mail.gif
        renotify: 1
        icon: localhost-fill/local/icons/mailbox_on.png
        badge: localhost-fill/local/icons/badge_mailbox.png
        timestamp: '%m'
        url: localhost-fill/states/group.homecams
        vibrate: 700, 700, 700
      message: You have {{ states.sensor.usps_mail.state }} new snail mails!
      title: New Snail Mail!
  id: 8bd9b1934cf74b688d65d38aa2b60ae5
- alias: Lobby package check
  trigger:
  - platform: state
    entity_id: input_select.gabe_status_dropdown
    to: In the Lobby
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.usps_packages
      above: 0
    - condition: time
      after: '15:00:00'
  action:
  - service: notify.html5_push
    data:
      data:
        actions:
        - action: dismiss
          title: Got it!
          icon: localhost-fill/local/icons/badge_package.png
        renotify: 1
        icon: localhost-fill/local/icons/package.png
        badge: localhost-fill/local/icons/badge_package.png
        timestamp: '%m'
        url: localhost-fill/states/group.homecams
        vibrate: 700, 700, 700
      message: You have {{ states.sensor.usps_packages.state }} new packages!
      title: New Packages!
  id: 0aeec4fa6c1643c5a8e1419baea4a41d
- alias: Mark Gabe as extended away
  trigger:
  - platform: state
    entity_id: input_select.gabe_status_dropdown
    to: Away
    for:
      hours: 24
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.gabe_status_dropdown
      option: Extended Away
  id: 7b769d5334df4219be03cd3f63276bfa
- alias: Request Mailbox Temp
  trigger:
  - platform: time_pattern
    minutes: /5
  action:
    service: script.turn_on
    entity_id: script.get_mailbox_temp
  id: eb61333ae5e84927a91d2fb06ca08413
- alias: Mailbox Mail Flag On
  trigger:
    platform: numeric_state
    entity_id: sensor.usps_mail
    above: 0
  action:
  - service: switch.turn_on
    data:
      entity_id: switch.mailbox_flag
  - service: switch.turn_on
    data:
      entity_id: switch.mailbox_green_light
  id: 3387bc2673a34d129401d57f21a35ac9
- alias: Mailbox Package Light On
  trigger:
    platform: numeric_state
    entity_id: sensor.usps_packages
    above: 0
  action:
  - service: switch.turn_on
    data:
      entity_id: switch.mailbox_flag
  - service: switch.turn_on
    data:
      entity_id: switch.mailbox_red_light
  id: 80f26a922c8a45b280a658811be8f108
- alias: Mailbox Mail Flag Off
  trigger:
    platform: numeric_state
    entity_id: sensor.usps_mail
    below: 1
  action:
  - service: switch.turn_off
    data:
      entity_id: switch.mailbox_flag
  - service: switch.turn_off
    data:
      entity_id: switch.mailbox_green_light
  id: 3caa8be4e4204b84bab63238ba33e0e9
- alias: Mailbox Package Light Off
  trigger:
    platform: numeric_state
    entity_id: sensor.usps_packages
    below: 1
  action:
  - service: switch.turn_off
    data:
      entity_id: switch.mailbox_flag
  - service: switch.turn_off
    data:
      entity_id: switch.mailbox_red_light
  id: 5280291ce5964036a3de8d651d4724eb
- alias: Birdfeed Flappy On
  trigger:
    platform: template
    value_template: '{{ 0.7 <= states.media_player.snapcast_client_b8_27_eb_31_93_b7.attributes.volume_level
      }}

      '
  action:
  - service: switch.turn_on
    data:
      entity_id: switch.birdfeed_flappy
  id: 61be13c37c3a4596b514561c1ec13aba
- alias: Birdfeed Flappy Off
  trigger:
    platform: template
    value_template: '{{ 0.7 >= states.media_player.snapcast_client_b8_27_eb_31_93_b7.attributes.volume_level
      }}

      '
  action:
  - service: switch.turn_off
    data:
      entity_id: switch.birdfeed_flappy
  id: 44d6119d41b7401f9732d508d6f3a1c1
- id: Hue Dimmer Switch 1 Click
  alias: Hue Dimmer Switch 1 Click
  trigger:
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 1_click
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 1_click_up
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  - service: light.turn_on
    entity_id: light.bedroom_desk
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  - service: light.turn_on
    entity_id: light.desk
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  - service: light.turn_on
    entity_id: light.kitchen
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  - service: light.turn_on
    entity_id: light.kitchen_2
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  - service: light.turn_on
    entity_id: light.entry_light
  - service: light.turn_on
    entity_id: light.table
    data:
      brightness: 200
      rgb_color: 255,236,182
- id: Hue Dimmer Switch 2 Click
  alias: Hue Dimmer Switch 2 Click
  trigger:
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 2_click
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 2_click_up
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      brightness: 255
      rgb_color:
      - 217
      - 234
      - 255
  - service: light.turn_on
    entity_id: light.bedroom_desk
    data:
      brightness: 255
      rgb_color:
      - 217
      - 234
      - 255
  - service: light.turn_on
    entity_id: light.desk
    data:
      brightness: 255
      rgb_color:
      - 217
      - 234
      - 255
  - service: light.turn_on
    entity_id: light.kitchen
    data:
      brightness: 255
      rgb_color:
      - 217
      - 234
      - 255
  - service: light.turn_on
    entity_id: light.kitchen_2
    data:
      brightness: 255
      rgb_color:
      - 217
      - 234
      - 255
  - service: light.turn_on
    entity_id: light.entry_light
  - service: light.turn_on
    entity_id: light.table
    data:
      brightness: 255
      rgb_color:
      - 217
      - 234
      - 255
- id: Hue Dimmer Switch 3 Click
  alias: Hue Dimmer Switch 3 Click
  trigger:
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 3_click
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 3_click_up
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      brightness: 100
      rgb_color:
      - 255
      - 226
      - 145
  - service: light.turn_on
    entity_id: light.bedroom_desk
    data:
      brightness: 100
      rgb_color:
      - 255
      - 226
      - 145
  - service: light.turn_on
    entity_id: light.desk
    data:
      brightness: 100
      rgb_color:
      - 255
      - 226
      - 145
  - service: light.turn_on
    entity_id: light.kitchen
    data:
      brightness: 100
      rgb_color:
      - 255
      - 226
      - 145
  - service: light.turn_on
    entity_id: light.kitchen_2
    data:
      brightness: 100
      rgb_color:
      - 255
      - 226
      - 145
  - service: light.turn_on
    entity_id: light.table
    data:
      brightness: 100
      rgb_color:
      - 255
      - 226
      - 145
  - service: light.turn_off
    entity_id: light.entry_light
- id: Hue Dimmer Switch 4 Click
  alias: Hue Dimmer Switch 4 Click
  trigger:
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 4_click
  - platform: state
    entity_id: sensor.hue_dimmer_switch_1
    to: 4_click_up
  action:
  - service: light.turn_off
    entity_id:
    - light.bed_light
    - light.bedroom_desk
    - light.desk
    - light.kitchen
    - light.kitchen_2
    - light.entry_light
    - light.table
    - light.big_o
- alias: Room Auto Record
  trigger:
    platform: time_pattern
    minutes: /10
    seconds: 0
  condition:
  - condition: state
    entity_id: binary_sensor.people_home
    state: 'off'
  - condition: state
    entity_id: binary_sensor.room_occupied
    state: 'on'
  action:
  - service: rest_command.trigger_snapshot_room
  id: 1d7dd2717a3e41a88ae9cbab6326a35a
- alias: Motion Detection Alert On
  trigger:
  - platform: state
    entity_id: binary_sensor.room_occupied
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: binary_sensor.dashboard_motion
    from: 'off'
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'off'
    - condition: state
      entity_id: vacuum.roomba
      state: 'off'
  action:
  - service: switch.turn_on
    entity_id: switch.motion_text_change
  - service: rest_command.trigger_snapshot_room
  - delay: 00:00:04
  - service: shell_command.motion_detect_get_latest
  - delay: 00:00:02
  - service: notify.html5_push
    data:
      data:
        actions:
        - action: call_the_hounds
          title: Call the Hounds!
          icon: localhost-fill/local/icons/badge_dog.png
        - action: dismiss
          title: Dismiss
          icon: localhost-fill/local/icons/badge_dismiss.png
        image: localhost-fill/local/motion/recent-motion-overall.jpg
        renotify: 1
        icon: localhost-fill/local/icons/cctv.png
        badge: localhost-fill/local/icons/badge_camera.png
        timestamp: '%m'
        url: localhost-fill/states/group.homecams
        vibrate: 700, 700, 700
      message: Motion in living room at {{ as_timestamp(now()) | timestamp_custom('%H:%M',
        true) }}
      title: Intruder Alert!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: I detected motion in your living room at {{ as_timestamp(now()) | timestamp_custom('%H:%M',
        true) }}
      title: Intruder Alert!
  id: faba15239d6b47f4af32c119d0afcac3
- alias: hound_alarm
  trigger:
  - event_data:
      action: call_the_hounds
    event_type: html5_notification.clicked
    platform: event
  action:
  - entity_id: switch.call_the_hounds
    service: switch.turn_on
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 255
      rgb_color: 255,0,0
      effect: solid
      flash: long
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  id: e62a71d396da4e428a7c82b2c5f26c0f
- id: media_mode_ambient_sounds
  alias: Media Mode Ambient Sounds
  trigger:
    platform: state
    entity_id: input_boolean.ambient_sounds
    to: 'on'
  action:
    service: input_select.select_option
    data_template:
      entity_id: input_select.ambient_sounds
      option: Dark Thunderstorm
- id: samsung_soundbar_power
  alias: Soundbar
  trigger:
    platform: state
    entity_id: input_boolean.samsung_soundbar_power
  action:
    service: remote.send_command
    data_template:
      entity_id: remote.gabes_harmony_hub
      device: Samsung Amp
      command: "{% if is_state(trigger.entity_id, 'on') %}\n  PowerOn\n{% else %}\n\
        \  PowerOff\n{% endif %}\n"
- alias: Samsung Soundbar Volume (Media to Slider)
  trigger:
  - platform: state
    entity_id: media_player.yamaha_receiver
  action:
    service: input_number.set_value
    data_template:
      entity_id: input_number.samsung_soundbar
      value: '{{ ( ( -1.0 + trigger.to_state.attributes.volume_level | float ) * 100.0
        ) | round(0.0) }}

        '
  id: 7bea33c24d6c4b02a307638015567354
- alias: Samsung Soundbar Volume (Slider to Media)
  trigger:
  - platform: state
    entity_id: input_number.samsung_soundbar
  action:
  - service: media_player.volume_set
    data_template:
      entity_id: media_player.yamaha_receiver
      volume_level: '{{ (1.0 - trigger.to_state.state | float / 100.0) | round(2)
        }}

        '
  id: 7b6fd823bf3e49f08a0c65e32180e3a0
- alias: Turn on Humidifier
  trigger:
  - platform: state
    entity_id: input_boolean.humidifier_toggle
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.alexa_humidifier_on
  id: d00595d8a6024a3abfe038390d5d29f7
- alias: Turn off Humidifier
  trigger:
  - platform: state
    entity_id: input_boolean.humidifier_toggle
    to: 'off'
  action:
  - service: script.turn_on
    entity_id: script.alexa_humidifier_off
  id: 99689fb5ead8419da6a3bbc4efc74723
- alias: Turn on Bedroom AC
  trigger:
  - platform: state
    entity_id: input_boolean.bedroom_ac_toggle
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.alexa_bedroom_ac_on
  id: 23288325cc6349e7afd43352142733db
- alias: Turn off Bedroom AC
  trigger:
  - platform: state
    entity_id: input_boolean.bedroom_ac_toggle
    to: 'off'
  action:
  - service: script.turn_on
    entity_id: script.alexa_bedroom_ac_off
  id: 64028c90fef540b88b3fb6bcfd2ab6b8
- alias: Turn on Livingroom AC
  trigger:
  - platform: state
    entity_id: input_boolean.livingroom_ac_toggle
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.alexa_livingroom_ac_on
  id: eab31a955600448b9fcda8ccfcdbcc4b
- alias: Turn off Livingroom AC
  trigger:
  - platform: state
    entity_id: input_boolean.livingroom_ac_toggle
    to: 'off'
  action:
  - service: script.turn_on
    entity_id: script.alexa_livingroom_ac_off
  id: 2131317842a7441698c2d0692d62397a
- alias: Set Livingroom AC
  trigger:
  - platform: state
    entity_id: input_select.alexa_livingroom_ac
  action:
  - service: script.turn_on
    data:
      entity_id: script.alexa_livingroom_ac_set
  id: 779b1fb0abc14846b730a1425cef5e97
- alias: Set Bedroom AC
  trigger:
  - platform: state
    entity_id: input_select.alexa_bedroom_ac
  action:
  - service: script.turn_on
    data:
      entity_id: script.alexa_bedroom_ac_set
  id: e6247727fae64b9981f2b5d21ed5ffc4
- alias: Homecam Snapshot Momentary
  trigger:
  - platform: state
    entity_id: input_boolean.homecam_snapshot
    to: 'on'
  action:
  - service: rest_command.trigger_snapshot_room
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.homecam_snapshot
  id: a24a00810a00417eb520503b9b659f2e
- alias: Aircraft Radio Power On
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_power_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_power
  - delay: 00:00:02
  - service: shell_command.aircraft_radio_mute
  id: 39c36e2f5a774539b0ced123e70cca43
- alias: Aircraft Radio Power Off
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_power_toggle
    to: 'off'
  action:
  - service: shell_command.aircraft_radio_mute
  - delay: 00:00:02
  - service: shell_command.aircraft_radio_power
  id: 1f40dcfbff6a41f8a88b7f192630eed8
- alias: Aircraft Radio Play Pause
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_play_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_play
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_play_toggle
  id: e6f6117f8da34ba8bba354293e729ee4
- alias: Aircraft Radio Mode
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_mode_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_mute
  - delay: 00:00:02
  - service: shell_command.aircraft_radio_mode
  - delay: 00:00:02
  - service: shell_command.aircraft_radio_mute
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_mode_toggle
  id: 388f5aad5e63474c8e8a5fab60d3bd86
- alias: Aircraft Radio Mute
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_mute_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_mute
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_mute_toggle
  id: c8a5e78799ca4f0286f6ca8b407fc6e5
- alias: Aircraft Radio EQ
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_eq_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_eq
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_eq_toggle
  id: 1e19149d343d4df69721e4657608db54
- alias: Aircraft Radio Fast Forward
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_fwd_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_fwd
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_fwd_toggle
  id: 63cde2eb504245b69e0a39315814b98a
- alias: Aircraft Radio Stop
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_stop_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_stop
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_stop_toggle
  id: 8ca88cd714924b8b981e3fdc3935dd32
- alias: Aircraft Radio Back
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_back_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_back
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_back_toggle
  id: 4e436ba90d2c4b6cb083851d2b037564
- alias: Aircraft Radio Rewind
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_rwd_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_rwd
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_rwd_toggle
  id: 475de3d6e74e4fcd9a9f8b8a9181c6c5
- alias: Aircraft Radio Volume Up
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_volume_up_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_up
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_radio_volume_up_toggle
  id: 08b1c6c4cd4542fb98c3ae6b0f34ef2e
- alias: Aircraft Radio Rewind
  trigger:
  - platform: state
    entity_id: input_boolean.aircraft_radio_volume_down_toggle
    to: 'on'
  action:
  - service: shell_command.aircraft_radio_down
  - delay: 00:00:02
  - service: input_boolean.turn_off
    entity_id: input_boolean.aircraft_volume_down_toggle
  id: 345dfb7e766347f49f09ab1174044c04
- alias: Amazon ATO
  trigger:
  - platform: state
    entity_id: input_boolean.amazon_ato
    to: 'on'
  action:
  - service: shell_command.amazon_ato_on
  - delay: 00:00:20
  - service: input_boolean.turn_off
    entity_id: input_boolean.amazon_ato
  - service: shell_command.amazon_ato_off
  id: 5f7fdccac1894fc7bf094189edefebda
- alias: Amazon ATO Nightly Top Off
  trigger:
  - platform: time
    at: '23:30:00'
  action:
    service: input_boolean.turn_on
    entity_id: input_boolean.amazon_ato
  id: d847f21b216a48eba4a592f143b88b12
- alias: Amazon ATO Low Top Off
  trigger:
  - platform: time
    at: '20:30:00'
  condition:
  - condition: state
    entity_id: sensor.amazonpifloat
    state: Low
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.amazon_ato
  - delay: 00:02:00
  - service: input_boolean.turn_on
    entity_id: input_boolean.amazon_ato
  - delay: 00:02:00
  - service: input_boolean.turn_on
    entity_id: input_boolean.amazon_ato
  - delay: 00:02:00
  - service: input_boolean.turn_on
    entity_id: input_boolean.amazon_ato
  id: 16c5c620c200436eaea00918713534b1
- alias: Amazon ATO Level Notify
  trigger:
  - platform: state
    entity_id: sensor.amazon_ato_level
    from: OK
    to: Low
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/fish_school.png
        badge: localhost-fill/local/icons/badge_pipe.png
        timestamp: '%m'
        url: localhost-fill/lovelace/6
        vibrate: 700, 700, 700
      message: The closet tank needs water soon
      title: Feeling Low
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: The closet tank needs water soon
      title: Feeling Low
  id: 8bcb65a053614595a0e2bde9ad2ca91d
- alias: Numpad A Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: G
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_a
  id: d6d6dc98551445f7a00190b9cbde8e89
- alias: Numpad B Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: D
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_b
  id: 4dbf709f7b404fa39267b5e54b7e161c
- alias: Numpad C Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: A
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_c
  id: 5d1a3bb85ee342d487d88c3816f17f51
- alias: Numpad D Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: H
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_d
  id: e5b6c106173241a3b435217469cfadfe
- alias: Numpad E Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: E
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_e
  id: 22b10124dddd4949bdb792f21208c0e4
- alias: Numpad F Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: B
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_f
  id: 5bf0ec9576aa48659359e08770aaaf66
- alias: Numpad G Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: I
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_g
  id: 96bdef9d38cd41ceb3975a540b7e97cd
- alias: Numpad H Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: F
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_h
  id: dd62eef255b441f6bd88de3b8fcafa99
- alias: Numpad I Toggle
  trigger:
  - platform: mqtt
    topic: numpad/reading/current
    payload: C
  action:
  - service: input_boolean.toggle
    entity_id: input_boolean.numpad_button_i
  id: 2c0c66c0a7d046f4856d2dbce254577c
- alias: Numpad A Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_a
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.table
  id: ca68570382ae47bdb53a5d029540e0b0
- alias: Numpad B Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_b
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.kitchen_overhead_light
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  id: 6e114c3c67654c11bd93fcee65ecd88c
- alias: Numpad C Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_c
    from: 'off'
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.rickroll
  id: 507cf5cb3a0d4735b7578cc825cd5fd9
- alias: Numpad D Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_d
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.desk
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  id: 37e98ffa456d4a3c978f719bf37a1ab1
- alias: Numpad E Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_e
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.entry_light
  id: 690f483e89ce4e82be50685f80e27b8b
- alias: Numpad F Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_f
    from: 'off'
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.freshwater_feeder_script
  id: 9b90b27c803a4216a67c6d76459a7f8b
- alias: Numpad G Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_g
    from: 'off'
    to: 'on'
  action:
  - service: notify.alexa_media
    data:
      data:
        type: tts
      target:
      - media_player.gabe_s_alexa
      message: You Shouldn't have pressed that button AJ.
  id: d7698a0ca81b4deb8b31ef78cf8770fc
- alias: Numpad I Automation On
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_i
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.desk_overhead
    data:
      brightness: 200
      rgb_color:
      - 255
      - 236
      - 182
  id: caa9dfc13aa042b7b6067dab5db4cf2f
- alias: Numpad A Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_a
    from: 'on'
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.table
  id: 184bb0bfef9547f8ab652d234d2d965f
- alias: Numpad B Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_b
    from: 'on'
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.kitchen_overhead_light
  id: 1d6f132d568c4234b9403951881db3cb
- alias: Numpad C Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_c
    from: 'on'
    to: 'off'
  action:
  - service: shell_command.volumio_pause
  id: 7eb2cd59c7a543e889d9b6c035d80949
- alias: Numpad D Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_d
    from: 'on'
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.desk
  id: aff6fe6f5ff4425faa48283265d81000
- alias: Numpad E Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_e
    from: 'on'
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.entry_light
  id: 2c5b3a96266348dcafa0683825685391
- alias: Numpad F Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_f
    from: 'on'
    to: 'off'
  action:
  - service: script.turn_on
    entity_id: script.freshwater_feeder_script
  id: 9687c916bd7c47d78bdaafeebfad0e8b
- alias: Numpad G Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_g
    from: 'on'
    to: 'off'
  action:
  - service: notify.alexa_media
    data:
      data:
        type: tts
      target:
      - media_player.gabe_s_alexa
      message: I've just launched the missiles. This apartment will self destruct."
  id: 59c9b47df922438799dbbcada800e282
- alias: Numpad I Automation Off
  trigger:
  - platform: state
    entity_id: input_boolean.numpad_button_i
    from: 'on'
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.desk_overhead
  id: 15a39768da9844a487e5319959ae82dc
- alias: Bed Set
  trigger:
    platform: state
    entity_id: sensor.bed_occupancy_load
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.bed_occupancy_load
      above: '201'
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.bed_occupancy
  id: f733f0a529be4550a63f486314a98448
- alias: Bed Clear
  trigger:
    platform: state
    entity_id: sensor.bed_occupancy_load
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.bed_occupancy_load
      below: '200'
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.bed_occupancy
  id: 714112fa4cf84823a2b5250329a9639c
- alias: Bed Tare Set
  trigger:
    platform: time
    at: '13:00:00'
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.bed_occupancy_load
      below: '100'
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.zero_bed
  id: 9d56af5547bb4ebc964e31c42d29bf12
- alias: Bed Occupied Tasks Single
  trigger:
    platform: state
    entity_id: sensor.bed_occupancy_count
    to: Single
  condition:
    condition: time
    after: '23:00:00'
    before: 06:00:00
  action:
  - service: light.turn_off
    entity_id:
    - light.bed_light
    - light.desk
    - light.kitchen
    - light.bedroom_desk
    - light.kitchen_2
    - light.table
    - light.thundercloud
    - light.big_o
    data:
      transition: 450
  - service: light.turn_off
    entity_id:
    - light.entry_light
    - light.et_figure
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 0.7
  id: 6533332d045144e49024306e6eb36549
- alias: Bed Occupied Tasks Daytime
  trigger:
    platform: state
    entity_id: input_boolean.bed_occupancy
    to: 'on'
  condition:
    condition: time
    after: '12:00:00'
    before: '20:00:00'
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      transition: 120
      brightness: 250
      rgb_color:
      - 252
      - 242
      - 197
  - service: light.turn_on
    entity_id: light.big_o
    data:
      transition: 120
      brightness: 50
      rgb_color:
      - 0
      - 255
      - 0
  id: e81fe758015f42fc9ff89015350ddc6b
- alias: Bed Not Occupied Tasks Single
  trigger:
    platform: state
    entity_id: sensor.bed_occupancy_count
    to: Empty
  condition:
    condition: and
    conditions:
    - condition: time
      after: '22:00:00'
      before: 05:00:00
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      transition: 1000
      brightness: 120
      rgb_color:
      - 115
      - 50
      - 168
  - service: light.turn_on
    entity_id: light.big_o
    data:
      transition: 1000
      brightness: 15
      rgb_color:
      - 0
      - 50
      - 25
  - service: light.turn_on
    entity_id: light.kitchen
    data:
      transition: 500
      brightness: 100
      rgb_color:
      - 115
      - 50
      - 168
  - service: switch.turn_on
    entity_id: switch.et_chest
  - service: switch.turn_on
    entity_id: switch.et_eyes
  id: a56eb041d15e4c61ac6f537e697e3977
- alias: Bed Not Occupied Tasks Morning
  trigger:
    platform: state
    entity_id: sensor.bed_occupancy_count
    to: Empty
  condition:
    condition: and
    conditions:
    - condition: time
      after: 07:00:00
      before: '11:00:00'
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  action:
  - service: light.turn_off
    entity_id: light.bed_light
    data:
      transition: 10000
      brightness: 120
      rgb_color:
      - 115
      - 50
      - 168
  - service: light.turn_off
    entity_id: light.big_o
    data:
      transition: 10000
      brightness: 120
      rgb_color:
      - 115
      - 50
      - 168
  - service: light.turn_off
    entity_id: light.bedroom_desk
    data:
      transition: 10000
      brightness: 120
      rgb_color:
      - 115
      - 50
      - 168
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/21
      deviceID:
      - browser_note_kiosk
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 1
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 0.2
  id: 4e7f8c1061b74404ab70f38e5e5b4c4c
- alias: Bed Not Occupied Tasks Day
  trigger:
    platform: state
    entity_id: binary_sensor.bedroom_motion
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: time
      after: '11:01:00'
      before: '21:59:00'
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
  action:
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 0.5
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 0.7
  id: 9fe9b2991921405e99f9b20b2efc43b1
- alias: Bedroom Light on Motion
  trigger:
    platform: state
    entity_id: binary_sensor.bedroom_motion
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: time
      after: '18:00:00'
      before: '21:59:00'
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      transition: 500
      brightness: 250
      rgb_color:
      - 255
      - 182
      - 109
  - service: light.turn_on
    entity_id: light.bedroom_desk
    data:
      transition: 500
      brightness: 250
      rgb_color:
      - 255
      - 182
      - 109
  - service: light.turn_on
    entity_id: light.big_o
    data:
      transition: 500
      brightness: 170
      rgb_color:
      - 255
      - 182
      - 109
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 0.5
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 0.5
  id: 50f84209ec8241f0813fc4d3191eb1a2
- alias: Bedroom Light off after Motion
  trigger:
    platform: state
    entity_id: binary_sensor.bedroom_motion
    to: 'off'
    for:
      minutes: 30
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: time
      after: '18:00:00'
      before: '21:59:00'
  action:
  - service: light.turn_off
    entity_id: light.bed_light
    data:
      transition: 1000
  - service: light.turn_off
    entity_id: light.bedroom_desk
    data:
      transition: 1000
  - service: light.turn_off
    entity_id: light.big_o
    data:
      transition: 1000
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 1
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 0
  id: d76588aedbbe4d2abc00e667afc93f73
- alias: Bathroom Sound on Motion
  trigger:
    platform: state
    entity_id: binary_sensor.bathroom_motion
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: time
      after: 05:00:00
      before: '23:00:00'
  action:
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0.6
  id: 2bbb280969bf4d8da8e6ba45df126e7d
- alias: Bathroom Sound off after Motion
  trigger:
  - platform: state
    entity_id: binary_sensor.bathroom_motion
    to: 'off'
    for:
      minutes: 5
  - platform: state
    entity_id: binary_sensor.bathroom_motion
    to: unavailable
    for:
      minutes: 5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: time
      after: 05:00:00
      before: '23:00:00'
  action:
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0
  id: 27420625b6e14df18b66cf9aa4bf515c
- alias: Light on before bed
  trigger:
    platform: time
    at: '22:00:00'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      transition: 5000
      brightness: 200
      rgb_color:
      - 115
      - 50
      - 168
  - service: light.turn_on
    entity_id: light.big_o
    data:
      transition: 5000
      brightness: 50
      rgb_color:
      - 0
      - 50
      - 168
  id: 0e77513ddf8b4877a66791950d736179
- alias: Bed Occupied Tasks Double
  trigger:
    platform: state
    entity_id: sensor.bed_occupancy_count
    to: Double
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: '{{is_state(''person.aaron_2'',''not_home'')}}

        '
    - condition: time
      after: '20:00:00'
      before: 06:00:00
  action:
  - service: light.turn_on
    entity_id: light.bed_light
    data:
      brightness: 120
      rgb_color:
      - 115
      - 50
      - 168
      transition: 300
  - service: light.turn_on
    entity_id: light.big_o
    data:
      transition: 5000
      brightness: 50
      rgb_color:
      - 0
      - 0
      - 168
  - service: light.turn_on
    entity_id: light.bedroom_desk
    data:
      brightness: 60
      rgb_color:
      - 89
      - 50
      - 168
      transition: 600
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 0
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 1
  id: 96657a37df014b789b32b05ffd18e84c
- alias: Set Ambient Sound
  trigger:
    platform: state
    entity_id: input_select.ambient_sounds
  action:
  - service: shell_command.volumio_clear_queue
  - service_template: "{% if is_state(\"input_select.ambient_sounds\", \"Underground\
      \ Cave\") %}\n  shell_command.volumio_amb_caves\n{% elif is_state(\"input_select.ambient_sounds\"\
      , \"Dusk Fields\") %}\n  shell_command.volumio_amb_dusk\n{% elif is_state(\"\
      input_select.ambient_sounds\", \"Autumn Woods\") %}\n  shell_command.volumio_amb_forest\n\
      {% elif is_state(\"input_select.ambient_sounds\", \"English Garden\") %}\n \
      \ shell_command.volumio_amb_garden\n{% elif is_state(\"input_select.ambient_sounds\"\
      , \"Island Paradise\") %}\n  shell_command.volumio_amb_island\n{% elif is_state(\"\
      input_select.ambient_sounds\", \"Morning Birds\") %}\n  shell_command.volumio_amb_birds\n\
      {% elif is_state(\"input_select.ambient_sounds\", \"Mountain Stream\") %}\n\
      \  shell_command.volumio_amb_mountain\n{% elif is_state(\"input_select.ambient_sounds\"\
      , \"Night Forest\") %}\n  shell_command.volumio_amb_night\n{% elif is_state(\"\
      input_select.ambient_sounds\", \"Ocean Waves\") %}\n  shell_command.volumio_amb_ocean\n\
      {% elif is_state(\"input_select.ambient_sounds\", \"Rainy Afternoon\") %}\n\
      \  shell_command.volumio_amb_rain\n{% elif is_state(\"input_select.ambient_sounds\"\
      , \"Dark Thunderstorm\") %}\n  shell_command.volumio_amb_thunderstorm\n{% elif\
      \ is_state(\"input_select.ambient_sounds\", \"Summer Heat\") %}\n  shell_command.volumio_amb_rain\n\
      {% else %}\n  shell_command.volumio_emptytrack\n{% endif %}\n"
  - service: shell_command.volumio_repeat_on
  id: 4af7a3e947a647aeabfb405f922b69c4
- alias: Lightning Warning
  trigger:
  - platform: geo_location
    source: wwlln
    zone: zone.home
    event: enter
  action:
  - service: persistent_notification.create
    data_template:
      message: '{{ trigger.to_state.name }} - {{ trigger.to_state.attributes.status
        }}, as of {{ trigger.to_state.attributes.publication_date }}'
      title: Oooooh! Lightning!
  - service: script.turn_on
    entity_id: script.lightning_burst
  id: 24f651cba1be45a3a704ff62f2345c07
- alias: Thundercloud Overcast
  trigger:
    platform: numeric_state
    entity_id: sensor.dark_sky_cloud_coverage
    above: 70
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 110
  id: ec2bb6c4dd89491cbeecb21b87a283fd
- alias: Thundercloud Sunny
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: clear-day
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 255
      rgb_color:
      - 255
      - 226
      - 145
      effect: solid
  id: 01de402cf53b4e4f9505e1a3055070a9
- alias: Thundercloud Sunny Night
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: clear-night
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 150
      rgb_color:
      - 255
      - 181
      - 108
      effect: solid
  id: 1cbbe24a0614426a93e8947e8601b70c
- alias: Thundercloud Cloudy
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: cloudy
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 255
      rgb_color:
      - 71
      - 71
      - 255
      effect: solid
  id: a357a86aa768402bb65e2cd2e44bf3d3
- alias: Thundercloud Fog
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: fog
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 255
      rgb_color:
      - 90
      - 255
      - 36
      effect: solid
  id: 44635fa56fe74f9a8e7de936439b147e
- alias: Thundercloud Partly Cloudy
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: partly-cloudy-day
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 255
      rgb_color:
      - 71
      - 208
      - 255
      effect: solid
  id: f9a86825b50b4553877eb8c0a88b7e9f
- alias: Thundercloud Partly Cloudy Night
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: partly-cloudy-night
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 110
      rgb_color:
      - 71
      - 208
      - 255
      effect: solid
  id: 5b17f3a9f1244454b42ea2944bcaf9cc
- alias: Thundercloud Rain
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: rain
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 120
      rgb_color:
      - 36
      - 36
      - 255
      effect: juggle
  id: 0784959e7e714969bfdcaf5d4ef83870
- alias: Thundercloud Snow
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: snow
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 120
      rgb_color:
      - 0
      - 255
      - 255
      effect: juggle
  id: 2ae9e4d025384d02b2f83caace5f53c9
- alias: Thundercloud Sleet
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: sleet
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 150
      rgb_color:
      - 0
      - 255
      - 190
      effect: glitter
  id: 0281bc934eab45519a201c640269ff2b
- alias: Thundercloud Wind
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: wind
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 200
      rgb_color:
      - 255
      - 226
      - 145
      effect: juggle
  id: d4689949d0a64fe998d742d6a672d78b
- alias: Thundercloud Thunderstorm
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: thunderstorm
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 180
      rgb_color:
      - 255
      - 255
      - 255
      effect: lightning
  id: eb195d1aa8e3483faa32f03466050ee2
- alias: Thundercloud Overcast Lowlight
  trigger:
    platform: numeric_state
    entity_id: sensor.dark_sky_cloud_coverage
    above: 70
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 30
  id: b7b2ae5dc97847c99460862370048693
- alias: Thundercloud Sunny Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: clear-day
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 60
      rgb_color:
      - 255
      - 226
      - 145
      effect: solid
  id: 6f2ca444c44b4660af56bfab92c6c79d
- alias: Thundercloud Sunny Night Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: clear-night
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 40
      rgb_color:
      - 255
      - 181
      - 108
      effect: solid
  id: 63e1aa58f943421eaa17e6e2eb3f83ad
- alias: Thundercloud Cloudy Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: cloudy
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 60
      rgb_color:
      - 71
      - 71
      - 255
      effect: solid
  id: e6edd687c9604312869c573bf654e886
- alias: Thundercloud Fog Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: fog
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 60
      rgb_color:
      - 90
      - 255
      - 36
      effect: solid
  id: 2d96c389506f4410a73ddddf3320de1b
- alias: Thundercloud Partly Cloudy Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: partly-cloudy-day
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 60
      rgb_color:
      - 71
      - 208
      - 255
      effect: solid
  id: b8fcb5ae1331455eb391784df457953a
- alias: Thundercloud Partly Cloudy Night Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: partly-cloudy-night
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 30
      rgb_color:
      - 71
      - 208
      - 255
      effect: solid
  id: 0fe8c46437fe48f1b392057088d0337a
- alias: Thundercloud Rain Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: rain
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 40
      rgb_color:
      - 36
      - 36
      - 255
      effect: juggle
  id: a084f13c9489426fafdcd509f3ae33a1
- alias: Thundercloud Snow Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: snow
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 40
      rgb_color:
      - 0
      - 255
      - 255
      effect: juggle
  id: 1764afb802d84bf091c9e9819e8a59d6
- alias: Thundercloud Sleet Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: sleet
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 40
      rgb_color:
      - 0
      - 255
      - 190
      effect: glitter
  id: 8b0ff3819b7346688e5c85d5fa9772ed
- alias: Thundercloud Wind Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: wind
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 50
      rgb_color:
      - 255
      - 226
      - 145
      effect: juggle
  id: 2a472dbbfa0841888687f8f54b708f89
- alias: Thundercloud Thunderstorm Lowlight
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.dark_sky_icon_0h
      state: thunderstorm
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
    - condition: state
      entity_id: light.entry_light
      state: 'off'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 60
      rgb_color:
      - 255
      - 255
      - 255
      effect: lightning
  id: 6713a6ed08a04ef1963c9bfc351c76c5
- alias: Thundercloud Weather Alert NYC
  trigger:
    platform: state
    entity_id: sensor.dark_sky_alerts
    from: '0'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: sensor.bed_occupancy_count
      state: Empty
    - condition: state
      entity_id: binary_sensor.people_home
      state: 'on'
  action:
  - service: light.turn_on
    entity_id: light.thundercloud
    data:
      brightness: 255
      rgb_color:
      - 255
      - 0
      - 0
      effect: solid
      flash: short
  id: 3c3d06326e024d65b327fcb88609165d
- alias: Fluxing for tts on
  trigger:
    platform: state
    entity_id: media_player.192_168_50_111
    to: playing
  action:
  - service: light.turn_on
    entity_id: light.flux_capacitor
    data:
      brightness: 133
      rgb_color:
      - 255
      - 208
      - 70
      effect: rainbow with glitter
  id: 7b6578871d9f462d93ea918f0eabc4c1
- alias: Fluxing for music on
  trigger:
    platform: state
    entity_id: media_player.192_168_50_111
    to: playing
  action:
  - service: light.turn_on
    entity_id: light.flux_capacitor
    data:
      brightness: 78
      rgb_color:
      - 255
      - 208
      - 71
      effect: flux
  id: 6ee555142f734715ada8ad76a5866244
- alias: Fluxing off
  trigger:
    platform: state
    entity_id: media_player.192_168_50_111
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.flux_capacitor
  id: 811cd2738b98444793457762dd3fe658
- alias: Fluxing paused
  trigger:
    platform: state
    entity_id: media_player.192_168_50_111
    to: paused
  action:
  - service: light.turn_on
    entity_id: light.flux_capacitor
    data:
      brightness: 32
      rgb_color:
      - 36
      - 90
      - 255
      effect: solid
  id: b4c64afe3ec64e3cbfd1c0f0bc8ab896
- alias: Music Kiosk Display
  trigger:
    platform: state
    entity_id: media_player.192_168_50_111
    to: playing
  action:
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/now_playing
      deviceID:
      - browser_note_kiosk
      - browser_tablet_kiosk
  id: e13e94098f084198b8132882aaeed6c6
- alias: Music Kiosk Display Off
  trigger:
    platform: state
    entity_id: media_player.gabes_music_server
    to: idle
  action:
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/15
      deviceID:
      - browser_note_kiosk
  - service: browser_mod.navigate
    data:
      navigation_path: /lovelace/13
      deviceID:
      - browser_tablet_kiosk
  id: 59dc44c1f47840528f26f4b5a64d4a05
- alias: Roomba - Run Roomba when Away
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    from: 'on'
    to: 'off'
    for:
      hours: 0
      minutes: 30
      seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  - condition: state
    entity_id: input_boolean.roomba_ran
    state: 'off'
  - condition: time
    after: '11:00'
    before: '20:00'
  - condition: state
    entity_id: vacuum.roomba
    state: 'off'
  - condition: numeric_state
    entity_id: sensor.roomba_batt
    above: 99
  action:
  - service: vacuum.turn_on
    entity_id:
    - vacuum.roomba
  id: 9ce888bdb79d4a53b9812e63af7927c9
- alias: Roomba - Shut Off Roomba when Home
  trigger:
  - platform: state
    entity_id: input_boolean.disable_roomba
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 45
  condition:
  - condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  - condition: state
    entity_id: vacuum.roomba
    state: 'on'
  action:
  - service: vacuum.return_to_base
    entity_id:
    - vacuum.roomba
  id: d3c470b89e664960b106e3a7004acc1d
- alias: Roomba - Run Roomba Weekdays when not Home
  trigger:
  - platform: time
    at: '13:00'
  condition:
  - condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  - condition: state
    entity_id: input_boolean.roomba_ran
    state: 'off'
  - condition: time
    weekday:
    - tue
    - wed
    - thu
    - fri
  - condition: state
    entity_id: vacuum.roomba
    state: 'off'
  - condition: state
    entity_id: binary_sensor.people_home
    state: 'off'
  - condition: numeric_state
    entity_id: sensor.roomba_batt
    above: 99
  action:
  - service: vacuum.turn_on
    entity_id:
    - vacuum.roomba
  id: c12b3ea1bd9e4a398692df3c5a8e3009
- alias: Roomba - Run Roomba Weekends
  trigger:
  - platform: time
    at: '17:00'
  condition:
  - condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  - condition: state
    entity_id: input_boolean.roomba_ran
    state: 'off'
  - condition: time
    weekday:
    - sat
    - sun
    - mon
  - condition: state
    entity_id: vacuum.roomba
    state: 'off'
  - condition: numeric_state
    entity_id: sensor.roomba_batt
    above: 99
  - condition: state
    entity_id: binary_sensor.people_home
    state: 'off'
  action:
  - service: vacuum.turn_on
    entity_id:
    - vacuum.roomba
  id: a84b88cba29d45508d8605d9db0afc76
- alias: Roomba - Turn off Roomba when House Guests Arrive
  trigger:
  - platform: state
    entity_id: input_boolean.guest_mode
    from: 'off'
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  - condition: state
    entity_id: vacuum.roomba
    state: 'on'
  action:
  - service: vacuum.return_to_base
    entity_id:
    - vacuum.roomba
  id: c308d6823b63490aa6599dd4ee579b36
- alias: Roomba - Set Roomba has Ran for the Day
  trigger:
  - platform: state
    entity_id: vacuum.roomba
    from: 'off'
    to: 'on'
    for:
      hours: 0
      minutes: 40
      seconds: 0
  condition:
    condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  action:
  - service: homeassistant.turn_on
    entity_id:
    - input_boolean.roomba_ran
  id: e7c271170c4d4011ab29a23a295abc32
- alias: Roomba - Reset Roomba has ran for the day
  trigger:
  - platform: time
    at: 00:01
  action:
  - service: homeassistant.turn_off
    entity_id:
    - input_boolean.roomba_ran
  id: 343e0f90b5734e2ea8db478bed72ae01
- alias: Roomba - Stuck Notification
  trigger:
  - platform: template
    value_template: '{%if is_state_attr(''vacuum.roomba'', ''status'', ''Stuck'')
      %}true{%endif%}'
  condition:
    condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon_template: '{% set url = states(''input_text.base_url'') %} {% set path
          = ''/local/icons/''%} {% set icon = "roomba" %} {% set ext = ''.png'' %}
          {{[url,path,icon,ext]|join}}

          '
        badge_template: '{% set url = states(''input_text.base_url'') %} {% set path
          = ''/local/icons/''%} {% set icon = "badge_roomba" %} {% set ext = ''.png''
          %} {{[url,path,icon,ext]|join}}

          '
        timestamp: '%m'
        url_template: '{% set url = states(''input_text.base_url'') %} {% set path
          = ''/lovelace/''%} {% set page = "apartment" %} {{[url,path,page]|join}}

          '
        vibrate: 700, 700, 700
      message: Roomba is stuck
      title: Send Help!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: Roomba is stuck
      title: Send Help!
  id: 9a63127e43634b4d9e032aea76ffbdbf
- alias: Roomba - Full Notification
  trigger:
  - platform: template
    value_template: '{%if is_state_attr(''vacuum.roomba'', ''bin_full'', true) %}true{%endif%}'
  condition:
    condition: state
    entity_id: input_boolean.disable_roomba
    state: 'off'
  action:
  - service: notify.html5_push
    data:
      data:
        renotify: 1
        icon: localhost-fill/local/icons/dust.png
        badge: localhost-fill/local/icons/badge_roomba.png
        timestamp: '%m'
        url: localhost-fill/lovelace/6
        vibrate: 700, 700, 700
      message: Roomba is full
      title: I ate too much!
      target:
      - Gabes Mate
      - Gabes Note 10
      - Macbook
      - macbookpro
  - service: persistent_notification.create
    data:
      message: Roomba is full
      title: I ate too much!
  id: 5f8a722629a744919b87b0dd0ff48a7e
- id: eroku_mpd_on
  alias: ERoku MPD On
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Home
  action:
  - service: media_player.toggle
    entity_id: media_player.192_168_50_111
- id: eroku_mpd_off
  alias: ERoku MPD Off
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Select
  action:
  - service: media_player.media_pause
    entity_id: media_player.gabes_music_server
  - service: media_player.turn_off
    entity_id: media_player.192_168_50_111
- id: eroku_mpd_play
  alias: ERoku MPD Play
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Play
  action:
  - service: media_player.play_pause
    entity_id: media_player.gabes_music_server
- id: eroku_mpd_fwd
  alias: ERoku MPD Fwd
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Fwd
  action:
  - service: media_player.media_next_track
    entity_id: media_player.gabes_music_server
- id: eroku_mpd_rev
  alias: ERoku MPD Rev
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Rev
  action:
  - service: media_player.media_previous_track
    entity_id: media_player.gabes_music_server
- id: eroku_mpd_shuffle
  alias: ERoku MPD Shuffle
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Back
  action:
  - service: media_player.shuffle_set
    entity_id: media_player.gabes_music_server
- id: eroku_mpd_news
  alias: ERoku MPD News
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Info
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.192_168_50_111
      media_content_type: music
      media_content_id: http://pd.npr.org/anon.npr-mp3/npr/news/newscast.mp3
- id: eroku_mpd_radio_uk
  alias: ERoku MPD Radio UK
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Backspace
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.192_168_50_111
      media_content_type: music
      media_content_id: http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio1_mf_p?s=1581371986&e=1581386386&h=0fd01ca2b35d9bec933601e4ee603cef
- id: eroku_mpd_radio_nyc
  alias: ERoku MPD Radio NYC
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Right
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.192_168_50_111
      media_content_type: music
      media_content_id: http://18843.live.streamtheworld.com:80/WQHT_SC?TGT=TuneIn&DIST=TuneIn
- id: eroku_mpd_playlist_up
  alias: ERoku MPD Playlist Up
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: ChannelUp
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.gabes_music_server
      source_list: HassUp
- id: eroku_mpd_playlist_down
  alias: ERoku MPD Playlist Down
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: ChannelDown
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.gabes_music_server
      source_list: Lounge
- id: eroku_mpd_playlist_shuffle_all
  alias: ERoku MPD Playlist Shuffle All
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: keypress
      key: Search
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.gabes_music_server
      source_list: Firehose
- id: eroku_mpd_shortcut_1
  alias: ERoku MPD Shortcut 1
  trigger:
  - platform: event
    event_type: roku_command
    event_data:
      source_name: Home Assistant
      type: launch
      app_id: Amazon
  action:
  - service: media_player.play_media
    data:
      entity_id: media_player.192_168_50_111
      media_artist: Indigo Girls
      shuffle: false
- alias: PhoneDial1Momentary
  id: PhoneDial1Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_101
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_101
- alias: PhoneDial2Momentary
  id: PhoneDial2Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_102
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_102
- alias: PhoneDial3Momentary
  id: PhoneDial3Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_103
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_103
- alias: PhoneDial4Momentary
  id: PhoneDial4Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_104
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_104
- alias: PhoneDial5Momentary
  id: PhoneDial5Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_105
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_105
- alias: PhoneDial6Momentary
  id: PhoneDial6Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_106
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_106
- alias: PhoneDial7Momentary
  id: PhoneDial7Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_107
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_107
- alias: PhoneDial8Momentary
  id: PhoneDial8Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_108
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_108
- alias: PhoneDial9Momentary
  id: PhoneDial9Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_109
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_109
  - service: snapcast.snapshot
    entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
  - service: snapcast.snapshot
    entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
  - service: snapcast.snapshot
    entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
      volume_level: 0.8
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
      volume_level: 0.8
  - service: media_player.volume_set
    data:
      entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
      volume_level: 0.8
  - service: shell_command.volumio_operator
  - delay: 00:02:30
  - service: snapcast.restore
    entity_id: media_player.snapcast_client_b8_27_eb_79_e8_44
  - service: snapcast.restore
    entity_id: media_player.snapcast_client_b8_27_eb_84_9d_15
  - service: snapcast.restore
    entity_id: media_player.snapcast_client_12_42_bf_4f_88_4f
- alias: PhoneDial0Momentary
  id: PhoneDial0Momentary
  trigger:
  - platform: state
    entity_id: switch.ringaring_53_110
    to: 'on'
  action:
  - delay: 00:00:03
  - service: switch.turn_off
    entity_id: switch.ringaring_53_110
- id: '1601930398828'
  alias: Tell me when ajs home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.aaron_2
    zone: zone.home
    event: enter
  condition: []
  action:
  - service: notify.html5_push_gabes_note_10
    data:
      Message: AJ just checked in
  mode: single
- id: '1601930403268'
  alias: Tell me when ajs home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.aaron_2
    zone: zone.home
    event: enter
  condition: []
  action:
  - service: notify.html5_push_gabes_note_10
    data:
      Message: AJ just checked in
  mode: single
- id: '1602901102253'
  alias: Tag Desk Tag is scanned off
  description: ''
  trigger:
  - platform: tag
    tag_id: d0cca14a-40e4-44f9-a837-fd51561f636b
  condition:
  - condition: state
    entity_id: light.desk
    state: 'on'
  action:
  - service: script.tag_desk_off
    data: {}
  mode: single
- alias: Tag Desk Tag is scanned on
  description: ''
  trigger:
  - platform: tag
    tag_id: d0cca14a-40e4-44f9-a837-fd51561f636b
  condition:
  - condition: state
    entity_id: light.desk
    state: 'off'
  action:
  - service: script.tag_desk_on
    data: {}
  mode: single
  id: 2ae8274be6a545f080554157fbf9db58
- id: '1602901495412'
  alias: Tag Couch Tag is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 1f6382f4-44b1-444a-84ca-749fb9ca6ee8
  condition: []
  action:
  - service: script.tag_couch
    data: {}
  mode: single
- id: '1602905371083'
  alias: Tag Bed Tag is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: a9d13284-25fe-45a5-ab31-5c8a994c3116
  condition: []
  action:
  - service: script.tag_bed
    data: {}
  mode: single
- id: '1602961210459'
  alias: Tag Knockdown Center is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 5ad8ad9b-7b40-4e27-a980-1a7105afb384
  condition: []
  action:
  - service: script.tag_desk
    data: {}
  mode: single
- id: '1602961263693'
  alias: Tag Knockdown Center is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 5ad8ad9b-7b40-4e27-a980-1a7105afb384
  condition: []
  action:
  - service: script.tag_desk
    data: {}
  mode: single
- id: '1602961428857'
  alias: Tag Knockdown Center is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 5ad8ad9b-7b40-4e27-a980-1a7105afb384
  condition: []
  action:
  - service: light.toggle
    data: {}
    entity_id: light.desk
  mode: single

- id: '1607495963700'
  alias: Macbook Pro Charger Off
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.macbook_battery
    above: '99'
  condition:
  - condition: and
    conditions:
    - condition: zone
      entity_id: person.gabe
      zone: zone.home
    - condition: state
      entity_id: light.desk
      state: 'on'
  action:
  - service: switch.turn_off
    data: {}
    entity_id: switch.06200928600194a7ffbc_1
  mode: single
- alias: Macbook Pro Charger On
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.macbook_battery
    below: '15'
  condition:
  - condition: and
    conditions:
    - condition: zone
      entity_id: person.gabe
      zone: zone.home
    - condition: state
      entity_id: light.desk
      state: 'on'
  action:
  - service: switch.turn_on
    data: {}
    entity_id: switch.06200928600194a7ffbc_1
  mode: single
